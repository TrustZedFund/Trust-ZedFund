<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Invest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0c3b2e;
  color: #fff;
}

header {
  padding: 18px;
  text-align: center;
  background: #06281f;
  font-size: 20px;
  font-weight: bold;
}

.plan {
  margin: 16px;
  padding: 16px;
  background: #135c47;
  border-radius: 14px;
}

.plan h3 {
  margin: 0 0 6px;
}

.plan small {
  opacity: 0.85;
}

.plan input {
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

.plan button {
  width: 100%;
  margin-top: 14px;
  padding: 14px;
  border-radius: 30px;
  border: none;
  font-size: 16px;
  font-weight: 600;
  background: linear-gradient(90deg, #22ff9a, #00d4ff);
  color: #00352f;
  cursor: pointer;
}
</style>
</head>

<body>

<header>Investment Plans</header>

<div class="plan">
  <h3>Starter Plan</h3>
  <small>30 days • Daily profit ZMW 10 / 500</small>
  <input id="starterAmt" type="number" placeholder="Minimum 500">
  <button onclick="invest('Starter Plan', 30, starterAmt.value)">Invest</button>
</div>

<div class="plan">
  <h3>Growth Plan</h3>
  <small>60 days • Daily profit ZMW 10 / 500</small>
  <input id="growthAmt" type="number" placeholder="Minimum 500">
  <button onclick="invest('Growth Plan', 60, growthAmt.value)">Invest</button>
</div>

<div class="plan">
  <h3>Premium Plan</h3>
  <small>90 days • Daily profit ZMW 10 / 500</small>
  <input id="premiumAmt" type="number" placeholder="Minimum 500">
  <button onclick="invest('Premium Plan', 90, premiumAmt.value)">Invest</button>
</div>

<script type="module">
import { auth, createInvestment } from "./firebase.js";

const user = auth.currentUser || JSON.parse(localStorage.getItem("user"));
if (!user) location.href = "login.html";

window.invest = async (name, days, amount) => {
  try {
    await createInvestment(user.uid, { name, days }, Number(amount));
    alert("Investment successful");
    location.href = "dashboard.html";
  } catch (e) {
    if (e.message.includes("Insufficient")) {
      location.href = "wallet.html";
    } else {
      alert(e.message);
    }
  }
};
</script>

</body>
</html>
. 